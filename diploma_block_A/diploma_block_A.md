# Курсовая работа блока А "Настройки и справочники"

## Описание задачи
Создать конфигурацию "Управление ИТ-фирмой" с базовым набором справочников, поддерживающую управление пользователями ИБ в режиме Предприятия.

## Результат [Выгрузка ИБ](https://github.com/MikeMadudin/onec_diploma/blob/main/diploma_block_A/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0%D0%94%D0%B8%D0%BF%D0%BB%D0%BE%D0%BC%D0%91%D0%BB%D0%BE%D0%BAA.dt)

## Реализовано:
- Справочник Контрагенты:
  - Форма элемента, в которой КПП доступен только для контрагентов-юридических лиц. Доступность отрабатывается как при изменении типа, так и при перечитывании элемента справочника из ИБ. При изменении наименования полное наименование заполняется с разворачиванием распространенных сокращений организационно-правовых форм (АО в Акционерное общество, ОАО в Открытое Акционерное общество и тд). Реализована проверка корректности ИНН как для физических, так и для юридических лиц. Проверяется при попытке записи и при изменении ИНН.
  - В модуле объекта определено заполнение по умолчанию: тип - Юридическое лицо, ответственный - текущий сотрудник из параметра сеанса ТекущийСотрудник.
- Справочник Сотрудники:
  - В модуле менеджера переопределено получение формы объекта в зависимости от права доступа "Администрирование".
  - Форма элемента ФормаАдминистратора для расширенного редактирования пользователей. Форма открывается для пользователей с правом доступа "Администрирование". Реализована команда "Случайный пароль", генерирующая случайный пароль и показывающая его пользователю. При записи сотрудника из этой формы выполняется:
    - создание пользователя ИБ с ролью БазовыеПрава;
    - изменение его пароля и имени для входа;
    - при снятии флажка ВходРазрешен - отключение стандартной аутентификации.
- Константа и функциональная опцию ВестиРасчетЗарплаты. Константа не присутствуеи в командном интерфейсе сама по себе. В состав ФО должны входят зарплатные реквизиты справочника Сотрудники, а константа присутствует флажком в общей форме НастройкаПрограммы.
- Общуя форма и общая команда НастройкаПрограммы. Форма содержит основной реквизит типа НаборКонстант и поле флажка для константы ВестиРасчетЗарплаты. Общая команда открывает общую форму и присутствует в командном интерфейсе раздела "Настройки".
- Параметр сеанса ТекущийСотрудник. Заполняется элементом справочника Сотрудники, идентификатор пользователя ИБ которого совпадает с идентификатором текущего пользователя ИБ.
- Роли: БазовыеПрава и ПолныеПрава.
  - Роль ПолныеПрава дает права на все, кроме интерактивного удаления элементов справочников, пометки на удаление и удаления помеченных предопределенных элементов справочников.
  - Роль БазовыеПрава дает права на чтение, просмотр и ввод по строке всех данных. Редактирование, добавление и изменение разрешается только для справочника Контрагенты. Роль не дает права на открытие настроек программы.
